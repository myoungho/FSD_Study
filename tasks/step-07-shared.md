# 7Îã®Í≥Ñ: shared Î†àÏù¥Ïñ¥ Íµ¨ÌòÑ (UI Ïª¥Ìè¨ÎÑåÌä∏, utils)

## üìù Ïù¥ Îã®Í≥ÑÏóêÏÑú Î∞∞Ïö∏ ÎÇ¥Ïö©
- shared Î†àÏù¥Ïñ¥Ïùò Ïó≠Ìï†Í≥º Ï§ëÏöîÏÑ±
- UI Ïª¥Ìè¨ÎÑåÌä∏ ÎùºÏù¥Î∏åÎü¨Î¶¨ Íµ¨ÏÑ±
- Í≥µÌÜµ Ïú†Ìã∏Î¶¨Ìã∞ Ìï®Ïàò ÏûëÏÑ±
- API ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ ÏÑ§Ï†ï

## üéØ shared Î†àÏù¥Ïñ¥ÎûÄ?

**Ïó≠Ìï†:** ÌîÑÎ°úÏ†ùÌä∏ Ï†ÑÏ≤¥ÏóêÏÑú Ïû¨ÏÇ¨Ïö© Í∞ÄÎä•Ìïú ÏΩîÎìú

### ÌäπÏßï:
- üîß **ÎπÑÏ¶àÎãàÏä§ Î°úÏßÅ ÏóÜÏùå** - ÏàúÏàò Ïú†Ìã∏Î¶¨Ìã∞
- üé® **UI Í∏∞Î≥∏ Î∏îÎ°ù** - ÏõêÏûêÏ†Å Ïª¥Ìè¨ÎÑåÌä∏
- üì¶ **ÎèÖÎ¶ΩÏ†Å** - Îã§Î•∏ Î†àÏù¥Ïñ¥ ÏùòÏ°¥ÏÑ± ÏóÜÏùå
- ‚ôªÔ∏è **Ïû¨ÏÇ¨Ïö©ÏÑ±** - Ïñ¥ÎîîÏÑúÎì† ÏÇ¨Ïö© Í∞ÄÎä•

### sharedÏóê Ìè¨Ìï®ÎêòÎäî Í≤É:
- ‚úÖ Button, Input Îì± Í∏∞Î≥∏ UI
- ‚úÖ formatDate, cn Îì± Ìó¨Ìçº Ìï®Ïàò
- ‚úÖ API ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏, axios Ïù∏Ïä§ÌÑ¥Ïä§
- ‚úÖ ÏÉÅÏàò, ÌôòÍ≤Ω Î≥ÄÏàò
- ‚úÖ Í≥µÌÜµ Ïª§Ïä§ÌÖÄ ÌõÖ
- ‚úÖ Í≥µÌÜµ ÌÉÄÏûÖ

### sharedÏóê Ìè¨Ìï®ÎêòÏßÄ ÏïäÎäî Í≤É:
- ‚ùå PostCard (entities/postÏóê ÏÜçÌï®)
- ‚ùå CreatePostForm (featuresÏóê ÏÜçÌï®)
- ‚ùå ÎπÑÏ¶àÎãàÏä§ Î°úÏßÅ
- ‚ùå ÎèÑÎ©îÏù∏ ÌäπÌôî ÏΩîÎìú

## üìÇ shared Íµ¨Ï°∞

```
shared/
‚îú‚îÄ‚îÄ ui/                    # Shadcn UI Ïª¥Ìè¨ÎÑåÌä∏
‚îÇ   ‚îú‚îÄ‚îÄ button.tsx
‚îÇ   ‚îú‚îÄ‚îÄ input.tsx
‚îÇ   ‚îú‚îÄ‚îÄ card.tsx
‚îÇ   ‚îú‚îÄ‚îÄ avatar.tsx
‚îÇ   ‚îú‚îÄ‚îÄ badge.tsx
‚îÇ   ‚îú‚îÄ‚îÄ skeleton.tsx
‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îú‚îÄ‚îÄ lib/                   # Ïú†Ìã∏Î¶¨Ìã∞ Ìï®Ïàò
‚îÇ   ‚îú‚îÄ‚îÄ utils.ts          # cn Ìï®Ïàò
‚îÇ   ‚îú‚îÄ‚îÄ formatDate.ts
‚îÇ   ‚îú‚îÄ‚îÄ formatNumber.ts
‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îú‚îÄ‚îÄ api/                   # API ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏
‚îÇ   ‚îú‚îÄ‚îÄ client.ts         # axios Ïù∏Ïä§ÌÑ¥Ïä§
‚îÇ   ‚îú‚îÄ‚îÄ types.ts          # API Í≥µÌÜµ ÌÉÄÏûÖ
‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îú‚îÄ‚îÄ config/                # ÏÑ§Ï†ï, ÏÉÅÏàò
‚îÇ   ‚îú‚îÄ‚îÄ constants.ts
‚îÇ   ‚îú‚îÄ‚îÄ env.ts
‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îú‚îÄ‚îÄ hooks/                 # Í≥µÌÜµ Ïª§Ïä§ÌÖÄ ÌõÖ
‚îÇ   ‚îú‚îÄ‚îÄ useLocalStorage.ts
‚îÇ   ‚îú‚îÄ‚îÄ useDebounce.ts
‚îÇ   ‚îú‚îÄ‚îÄ useMediaQuery.ts
‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îî‚îÄ‚îÄ types/                 # Í≥µÌÜµ ÌÉÄÏûÖ
    ‚îú‚îÄ‚îÄ common.ts
    ‚îî‚îÄ‚îÄ index.ts
```

## üèóÔ∏è 1. shared/lib Íµ¨ÌòÑ

### 1-1. formatDate Ïú†Ìã∏Î¶¨Ìã∞
```typescript
// shared/lib/formatDate.ts
export function formatDate(date: Date | string, format: 'short' | 'long' = 'short'): string {
  const d = typeof date === 'string' ? new Date(date) : date

  if (format === 'short') {
    return new Intl.DateTimeFormat('ko-KR', {
      year: 'numeric',
      month: 'short',
      day: 'numeric',
    }).format(d)
  }

  return new Intl.DateTimeFormat('ko-KR', {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
    hour: '2-digit',
    minute: '2-digit',
  }).format(d)
}

export function formatRelativeTime(date: Date | string): string {
  const d = typeof date === 'string' ? new Date(date) : date
  const now = new Date()
  const diffInSeconds = Math.floor((now.getTime() - d.getTime()) / 1000)

  const intervals = {
    ÎÖÑ: 31536000,
    Í∞úÏõî: 2592000,
    Ï£º: 604800,
    Ïùº: 86400,
    ÏãúÍ∞Ñ: 3600,
    Î∂Ñ: 60,
  }

  for (const [unit, seconds] of Object.entries(intervals)) {
    const interval = Math.floor(diffInSeconds / seconds)
    if (interval >= 1) {
      return `${interval}${unit} Ï†Ñ`
    }
  }

  return 'Î∞©Í∏à Ï†Ñ'
}
```

### 1-2. formatNumber Ïú†Ìã∏Î¶¨Ìã∞
```typescript
// shared/lib/formatNumber.ts
export function formatNumber(num: number): string {
  if (num >= 1000000) {
    return `${(num / 1000000).toFixed(1)}M`
  }
  if (num >= 1000) {
    return `${(num / 1000).toFixed(1)}K`
  }
  return num.toString()
}

export function formatCurrency(amount: number, currency = 'KRW'): string {
  return new Intl.NumberFormat('ko-KR', {
    style: 'currency',
    currency,
  }).format(amount)
}
```

### 1-3. string Ïú†Ìã∏Î¶¨Ìã∞
```typescript
// shared/lib/string.ts
export function truncate(str: string, maxLength: number): string {
  if (str.length <= maxLength) return str
  return str.slice(0, maxLength) + '...'
}

export function slugify(text: string): string {
  return text
    .toLowerCase()
    .trim()
    .replace(/[^\w\s-]/g, '')
    .replace(/[\s_-]+/g, '-')
    .replace(/^-+|-+$/g, '')
}
```

### 1-4. Public API
```typescript
// shared/lib/index.ts
export { cn } from './utils'
export { formatDate, formatRelativeTime } from './formatDate'
export { formatNumber, formatCurrency } from './formatNumber'
export { truncate, slugify } from './string'
```

## üèóÔ∏è 2. shared/api Íµ¨ÌòÑ

### 2-1. API ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ ÏÑ§Ï†ï
```typescript
// shared/api/client.ts
import axios, { type AxiosInstance, type AxiosError } from 'axios'

const BASE_URL = import.meta.env.VITE_API_URL || 'http://localhost:3000/api'

export const apiClient: AxiosInstance = axios.create({
  baseURL: BASE_URL,
  timeout: 10000,
  headers: {
    'Content-Type': 'application/json',
  },
})

// Request interceptor
apiClient.interceptors.request.use(
  (config) => {
    // ÌÜ†ÌÅ∞Ïù¥ ÏûàÏúºÎ©¥ Ìó§ÎçîÏóê Ï∂îÍ∞Ä
    const token = localStorage.getItem('auth_token')
    if (token) {
      config.headers.Authorization = `Bearer ${token}`
    }
    return config
  },
  (error) => {
    return Promise.reject(error)
  }
)

// Response interceptor
apiClient.interceptors.response.use(
  (response) => response,
  (error: AxiosError) => {
    // ÏóêÎü¨ Ï≤òÎ¶¨
    if (error.response?.status === 401) {
      // Ïù∏Ï¶ù Ïã§Ìå® - Î°úÍ∑∏Ïù∏ ÌéòÏù¥ÏßÄÎ°ú Î¶¨Îã§Ïù¥Î†âÌä∏
      localStorage.removeItem('auth_token')
      window.location.href = '/login'
    }

    return Promise.reject(error)
  }
)
```

### 2-2. API Í≥µÌÜµ ÌÉÄÏûÖ
```typescript
// shared/api/types.ts
export interface ApiResponse<T> {
  data: T
  message?: string
  success: boolean
}

export interface PaginatedResponse<T> {
  data: T[]
  pagination: {
    page: number
    pageSize: number
    total: number
    totalPages: number
  }
}

export interface ApiError {
  message: string
  code: string
  details?: unknown
}
```

### 2-3. Public API
```typescript
// shared/api/index.ts
export { apiClient } from './client'
export type { ApiResponse, PaginatedResponse, ApiError } from './types'
```

## üèóÔ∏è 3. shared/config Íµ¨ÌòÑ

### 3-1. ÌôòÍ≤Ω Î≥ÄÏàò
```typescript
// shared/config/env.ts
export const env = {
  apiUrl: import.meta.env.VITE_API_URL || 'http://localhost:3000/api',
  isDev: import.meta.env.DEV,
  isProd: import.meta.env.PROD,
} as const
```

### 3-2. ÏÉÅÏàò
```typescript
// shared/config/constants.ts
export const APP_NAME = 'FSD Blog'

export const ROUTES = {
  HOME: '/',
  POST_DETAIL: '/posts/:id',
  POST_CREATE: '/posts/create',
  POST_EDIT: '/posts/:id/edit',
  PROFILE: '/profile/:id',
  LOGIN: '/login',
  SIGNUP: '/signup',
} as const

export const CATEGORIES = [
  'Architecture',
  'React',
  'TypeScript',
  'JavaScript',
  'CSS',
  'Backend',
  'DevOps',
] as const

export const PAGINATION = {
  DEFAULT_PAGE: 1,
  DEFAULT_PAGE_SIZE: 10,
  MAX_PAGE_SIZE: 100,
} as const

export const VALIDATION = {
  POST_TITLE_MIN_LENGTH: 5,
  POST_TITLE_MAX_LENGTH: 100,
  POST_CONTENT_MIN_LENGTH: 100,
  COMMENT_MIN_LENGTH: 1,
  COMMENT_MAX_LENGTH: 500,
} as const
```

### 3-3. Public API
```typescript
// shared/config/index.ts
export { env } from './env'
export * from './constants'
```

## üèóÔ∏è 4. shared/hooks Íµ¨ÌòÑ

### 4-1. useLocalStorage
```typescript
// shared/hooks/useLocalStorage.ts
import { useState, useEffect } from 'react'

export function useLocalStorage<T>(
  key: string,
  initialValue: T
): [T, (value: T | ((val: T) => T)) => void] {
  // State to store our value
  const [storedValue, setStoredValue] = useState<T>(() => {
    try {
      const item = window.localStorage.getItem(key)
      return item ? JSON.parse(item) : initialValue
    } catch (error) {
      console.error(error)
      return initialValue
    }
  })

  // Return a wrapped version of useState's setter function that
  // persists the new value to localStorage.
  const setValue = (value: T | ((val: T) => T)) => {
    try {
      // Allow value to be a function so we have same API as useState
      const valueToStore =
        value instanceof Function ? value(storedValue) : value
      setStoredValue(valueToStore)
      window.localStorage.setItem(key, JSON.stringify(valueToStore))
    } catch (error) {
      console.error(error)
    }
  }

  return [storedValue, setValue]
}
```

### 4-2. useDebounce
```typescript
// shared/hooks/useDebounce.ts
import { useState, useEffect } from 'react'

export function useDebounce<T>(value: T, delay: number = 500): T {
  const [debouncedValue, setDebouncedValue] = useState<T>(value)

  useEffect(() => {
    const handler = setTimeout(() => {
      setDebouncedValue(value)
    }, delay)

    return () => {
      clearTimeout(handler)
    }
  }, [value, delay])

  return debouncedValue
}
```

### 4-3. useMediaQuery
```typescript
// shared/hooks/useMediaQuery.ts
import { useState, useEffect } from 'react'

export function useMediaQuery(query: string): boolean {
  const [matches, setMatches] = useState(false)

  useEffect(() => {
    const media = window.matchMedia(query)
    if (media.matches !== matches) {
      setMatches(media.matches)
    }

    const listener = () => setMatches(media.matches)
    media.addEventListener('change', listener)

    return () => media.removeEventListener('change', listener)
  }, [matches, query])

  return matches
}

// Ìé∏Ïùò Ìï®ÏàòÎì§
export const useIsMobile = () => useMediaQuery('(max-width: 768px)')
export const useIsTablet = () => useMediaQuery('(min-width: 768px) and (max-width: 1024px)')
export const useIsDesktop = () => useMediaQuery('(min-width: 1024px)')
```

### 4-4. Public API
```typescript
// shared/hooks/index.ts
export { useLocalStorage } from './useLocalStorage'
export { useDebounce } from './useDebounce'
export { useMediaQuery, useIsMobile, useIsTablet, useIsDesktop } from './useMediaQuery'
```

## üèóÔ∏è 5. shared/types Íµ¨ÌòÑ

```typescript
// shared/types/common.ts
export type ID = string | number

export interface SelectOption<T = string> {
  label: string
  value: T
}

export interface TimeStamps {
  createdAt: Date
  updatedAt: Date
}

export type Status = 'idle' | 'loading' | 'success' | 'error'

export interface LoadingState {
  status: Status
  error?: string
}
```

```typescript
// shared/types/index.ts
export type { ID, SelectOption, TimeStamps, Status, LoadingState } from './common'
```

## üèóÔ∏è 6. shared/ui Public API

```typescript
// shared/ui/index.ts
export { Button, type ButtonProps } from './button'
export { Input, type InputProps } from './input'
export { Card, CardHeader, CardContent, CardFooter, type CardProps } from './card'
export { Avatar, AvatarImage, AvatarFallback } from './avatar'
export { Badge, type BadgeProps } from './badge'
export { Skeleton } from './skeleton'
// ... Îã§Î•∏ Shadcn Ïª¥Ìè¨ÎÑåÌä∏Îì§
```

## üì¶ ÌïÑÏöîÌïú Ìå®ÌÇ§ÏßÄ ÏÑ§Ïπò

```bash
# API ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏
npm install axios

# Í∞úÎ∞ú ÏùòÏ°¥ÏÑ±
npm install -D @types/node
```

## üéì shared ÏÑ§Í≥Ñ ÏõêÏπô

### ‚úÖ Ìï¥Ïïº Ìï† Í≤É:
1. **ÏàúÏàò Ìï®Ïàò** - Î∂ÄÏàòÌö®Í≥º ÏóÜÎäî Ìï®Ïàò
2. **Ïû¨ÏÇ¨Ïö©ÏÑ±** - Ïñ¥ÎîîÏÑúÎì† ÏÇ¨Ïö© Í∞ÄÎä•
3. **ÌÉÄÏûÖ ÏïàÏ†Ñ** - Ï†úÎÑ§Î¶≠ ÌôúÏö©
4. **Î¨∏ÏÑúÌôî** - JSDoc Ï£ºÏÑù

### ‚ùå ÌïòÏßÄ ÎßêÏïÑÏïº Ìï† Í≤É:
1. **ÎπÑÏ¶àÎãàÏä§ Î°úÏßÅ** - featuresÏóêÏÑú Îã¥Îãπ
2. **ÎèÑÎ©îÏù∏ ÌÉÄÏûÖ** - entitiesÏóêÏÑú Ï†ïÏùò
3. **ÏÉÅÏúÑ Î†àÏù¥Ïñ¥ import** - ÏàúÌôò ÏùòÏ°¥ÏÑ±
4. **Î≥µÏû°Ìïú Î°úÏßÅ** - Îã®ÏàúÌïòÍ≤å Ïú†ÏßÄ

## üß™ ÌÖåÏä§Ìä∏ ÏòàÏãú

```typescript
// App.tsxÏóêÏÑú ÌÖåÏä§Ìä∏
import { formatDate, formatRelativeTime, formatNumber } from '@/shared/lib'
import { Button } from '@/shared/ui'
import { useLocalStorage, useIsMobile } from '@/shared/hooks'
import { CATEGORIES } from '@/shared/config'

function App() {
  const [theme, setTheme] = useLocalStorage('theme', 'light')
  const isMobile = useIsMobile()

  return (
    <div className="p-8">
      <h1>Shared Î†àÏù¥Ïñ¥ ÌÖåÏä§Ìä∏</h1>

      <div className="space-y-4">
        <p>Ïò§Îäò: {formatDate(new Date())}</p>
        <p>1ÏãúÍ∞Ñ Ï†Ñ: {formatRelativeTime(new Date(Date.now() - 3600000))}</p>
        <p>Ï°∞ÌöåÏàò: {formatNumber(12500)}</p>
        <p>ÌÖåÎßà: {theme}</p>
        <p>Î™®Î∞îÏùº: {isMobile ? 'Yes' : 'No'}</p>
        <p>Ïπ¥ÌÖåÍ≥†Î¶¨: {CATEGORIES.join(', ')}</p>

        <Button onClick={() => setTheme(theme === 'light' ? 'dark' : 'light')}>
          ÌÖåÎßà Î≥ÄÍ≤Ω
        </Button>
      </div>
    </div>
  )
}
```

## üéì Îã§Ïùå Îã®Í≥Ñ Ï§ÄÎπÑ

Ïù¥ Îã®Í≥ÑÎ•º ÏôÑÎ£åÌïòÎ©¥:
- ‚úÖ Í≥µÌÜµ Ïú†Ìã∏Î¶¨Ìã∞ Ìï®Ïàò Íµ¨ÌòÑ
- ‚úÖ API ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ ÏÑ§Ï†ï
- ‚úÖ Ïª§Ïä§ÌÖÄ ÌõÖ ÎùºÏù¥Î∏åÎü¨Î¶¨
- ‚úÖ UI Ïª¥Ìè¨ÎÑåÌä∏ ÎùºÏù¥Î∏åÎü¨Î¶¨ Íµ¨ÏÑ±
- ‚úÖ features Íµ¨ÌòÑ Ï§ÄÎπÑ

**Îã§Ïùå Îã®Í≥Ñ**: [8Îã®Í≥Ñ - features Î†àÏù¥Ïñ¥ Íµ¨ÌòÑ](./step-08-features.md)

## üìö Ï∞∏Í≥† ÏûêÎ£å
- [FSD Shared Layer](https://feature-sliced.design/docs/reference/layers#shared)
- [Axios Documentation](https://axios-http.com/)
